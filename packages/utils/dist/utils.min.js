var MITO=function(e){"use strict";var n,t,r,o,i,a,s=function(){return(s=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)};function u(){for(var e=0,n=0,t=arguments.length;n<t;n++)e+=arguments[n].length;var r=Array(e),o=0;for(n=0;n<t;n++)for(var i=arguments[n],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}!function(e){e.UNKNOWN="UNKNOWN",e.UNKNOWN_FUNCTION="UNKNOWN_FUNCTION",e.JAVASCRIPT_ERROR="JAVASCRIPT_ERROR",e.LOG_ERROR="LOG_ERROR",e.HTTP_ERROR="HTTP_ERROR",e.FETCH_ERROR="FETCH_HTTP_ERROR",e.VUE_ERROR="VUE_ERROR",e.REACT_ERROR="REACT_ERROR",e.RESOURCE_ERROR="RESOURCE_ERROR",e.PROMISE_ERROR="PROMISE_ERROR",e.ROUTE_ERROR="ROUTE_ERROR"}(n||(n={})),s({},n),function(e){e.ROUTE="Route",e.CLICK="UI.Click",e.XHR="xhr",e.CONSOLE="Console",e.FETCH="Fetch",e.UNHANDLEDREJECTION="Unhandledrejection",e.CODE_ERROR="Code Error",e.VUE="Vue",e.REACT="React",e.RESOURCE="Resource",e.CUSTOMER="Customer"}(t||(t={})),function(e){e.HTTP="http",e.USER="user",e.DEBUG="debug",e.EXCEPTION="exception",e.LIFECYCLE="lifecycle"}(r||(r={})),function(e){e.XHR="xhr",e.FETCH="fetch",e.CONSOLE="console",e.DOM="dom",e.HISTORY="history",e.ERROR="error",e.HASHCHANGE="hashchange",e.UNHANDLEDREJECTION="unhandledrejection",e.VUE="Vue"}(o||(o={})),function(e){e.XHR="xhr",e.FETCH="fetch"}(i||(i={})),function(e){e[e.BAD_REQUEST=400]="BAD_REQUEST",e[e.UNAUTHORIZED=401]="UNAUTHORIZED",e[e.INTERNAL_EXCEPTION=500]="INTERNAL_EXCEPTION"}(a||(a={}));var c=Object.prototype.toString;function l(e){return function(n){return c.call(n)==="[object "+e+"]"}}var f={isNumber:l("Number"),isString:l("String"),isBoolean:l("Boolean"),isNull:l("Null"),isUndefined:l("Undefined"),isSymbol:l("Symbol"),isFunction:l("Function"),isObject:l("Object"),isArray:l("Array"),isProcess:l("process"),isWindow:l("Window")};function d(e,n){try{return e instanceof n}catch(e){return!1}}var p=f.isWindow("undefined"!=typeof window?window:0);function E(){if(p)return window}function h(){return R.__MITO__=R.__MITO__||{},R.__MITO__}var R=E(),O=h();O.replaceFlag=O.replaceFlag||{};var g=O.replaceFlag;function S(e,n){g[e]||(g[e]=n)}var v="MITO Logger",N=function(){function e(){var e=this;if(this.enabled=!1,this._console={},R.console=console||R.console,console||R.console){["log","debug","info","warn","error","assert"].forEach((function(n){n in R.console&&(e._console[n]=R.console[n])}))}}return e.prototype.disable=function(){this.enabled=!1},e.prototype.bindOptions=function(e){this.enabled=!!e},e.prototype.enable=function(){this.enabled=!0},e.prototype.getEnableStatus=function(){return this.enabled},e.prototype.log=function(){for(var e,n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];this.enabled&&(e=this._console).log.apply(e,u([v+"[Log]:"],n))},e.prototype.warn=function(){for(var e,n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];this.enabled&&(e=this._console).warn.apply(e,u([v+"[Warn]:"],n))},e.prototype.error=function(){for(var e,n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];this.enabled&&(e=this._console).error.apply(e,u([v+"[Error]:"],n))},e}(),m=O.logger||(O.logger=new N);function y(e,n){return typeof e===n}function _(){return Date.now()}function b(){return"undefined"==typeof document||null===document.location?"":document.location.href}function x(e,n){return c.call(e)===n}var T,U,C=function(){function e(){this.stack=[],this.isFlushing=!1,"Promise"in R&&(this.micro=Promise.resolve())}return e.prototype.addFn=function(e){var n=this;"function"==typeof e&&("Promise"in R?(this.stack.push(e),this.isFlushing||(this.isFlushing=!0,this.micro.then((function(){return n.flushStack()})))):e())},e.prototype.clear=function(){this.stack=[]},e.prototype.getStack=function(){return this.stack},e.prototype.flushStack=function(){var e=this.stack.splice(0);this.stack.length=0,this.isFlushing=!1;for(var n=0;n<e.length;n++)e[n]()},e}();return e.Severity=void 0,(T=e.Severity||(e.Severity={})).Else="else",T.Error="error",T.Warning="warning",T.Info="info",T.Debug="debug",T.Low="low",T.Normal="normal",T.High="high",T.Critical="critical",function(e){e.fromString=function(n){switch(n){case"debug":return e.Debug;case"info":case"log":case"assert":return e.Info;case"warn":case"warning":return e.Warning;case e.Low:case e.Normal:case e.High:case e.Critical:case"error":return e.Error;default:return e.Else}}}(e.Severity||(e.Severity={})),e.SpanStatus=void 0,(U=e.SpanStatus||(e.SpanStatus={})).Ok="ok",U.DeadlineExceeded="deadline_exceeded",U.Unauthenticated="unauthenticated",U.PermissionDenied="permission_denied",U.NotFound="not_found",U.ResourceExhausted="resource_exhausted",U.InvalidArgument="invalid_argument",U.Unimplemented="unimplemented",U.Unavailable="unavailable",U.InternalError="internal_error",U.UnknownError="unknown_error",U.Cancelled="cancelled",U.AlreadyExists="already_exists",U.FailedPrecondition="failed_precondition",U.Aborted="aborted",U.OutOfRange="out_of_range",U.DataLoss="data_loss",e.Logger=N,e.Queue=C,e._global=R,e._support=O,e.defaultFunctionName="<anonymous>",e.extractErrorStack=function(e,t){var r={time:_(),url:b(),name:e.name,level:t,message:e.message};if(void 0===e.stack||!e.stack)return r;for(var o,i,a,u=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|[a-z]:|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,c=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,l=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,f=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,d=/\((\S*)(?::(\d+))(?::(\d+))\)/,p=e.stack.split("\n"),E=[],h=0,R=p.length;h<R;++h){if(i=u.exec(p[h])){var O=i[2]&&0===i[2].indexOf("native");i[2]&&0===i[2].indexOf("eval")&&(o=d.exec(i[2]))&&(i[2]=o[1],i[3]=o[2],i[4]=o[3]),a={url:O?null:i[2],func:i[1]||n.UNKNOWN_FUNCTION,args:O?[i[2]]:[],line:i[3]?+i[3]:null,column:i[4]?+i[4]:null}}else if(i=l.exec(p[h]))a={url:i[2],func:i[1]||n.UNKNOWN_FUNCTION,args:[],line:+i[3],column:i[4]?+i[4]:null};else{if(!(i=c.exec(p[h])))continue;i[3]&&i[3].indexOf(" > eval")>-1&&(o=f.exec(i[3]))?(i[3]=o[1],i[4]=o[2],i[5]=null):0!==h||i[5]||void 0===e.columnNumber||(E[0].column=e.columnNumber+1),a={url:i[3],func:i[1]||n.UNKNOWN_FUNCTION,args:i[2]?i[2].split(","):[],line:i[4]?+i[4]:null,column:i[5]?+i[5]:null}}!a.func&&a.line&&(a.func=n.UNKNOWN_FUNCTION),E.push(a)}return E.length?s(s({},r),{stack:E}):null},e.fromHttpStatus=function(n){if(n<400)return e.SpanStatus.Ok;if(n>=400&&n<500)switch(n){case 401:return e.SpanStatus.Unauthenticated;case 403:return e.SpanStatus.PermissionDenied;case 404:return e.SpanStatus.NotFound;case 409:return e.SpanStatus.AlreadyExists;case 413:return e.SpanStatus.FailedPrecondition;case 429:return e.SpanStatus.ResourceExhausted;default:return e.SpanStatus.InvalidArgument}if(n>=500&&n<600)switch(n){case 501:return e.SpanStatus.Unimplemented;case 503:return e.SpanStatus.Unavailable;case 504:return e.SpanStatus.DeadlineExceeded;default:return e.SpanStatus.InternalError}},e.generateUUID=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(n){var t=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==n?t:3&t|8).toString(16)}))},e.getBigVersion=function(e){return Number(e.split(".")[0])},e.getFlag=function(e){return g[e]},e.getFunctionName=function(e){return e&&"function"==typeof e&&e.name||"<anonymous>"},e.getGlobal=E,e.getGlobalMitoSupport=h,e.getLocationHref=b,e.getTimestamp=_,e.htmlElementAsString=function(e){var n=e.tagName.toLowerCase();if("body"===n)return null;var t=e.classList.value;t=""!==t?'class="'+t+'"':"";var r=e.id?'id="'+e.id+'"':"";return e.innerText,"<"+n+" "+r+" "+t+"></"+n+">"},e.interceptStr=function(e,n){return f.isString(e)?e.slice(0,n)+(e.length>n?":截取前"+n+"个字符":""):""},e.isBrowserEnv=p,e.isEmpty=function(e){return f.isString(e)&&""===e.trim()||null==e},e.isEmptyObject=function(e){return f.isObject(e)&&0===Object.keys(e).length},e.isError=function(e){switch(c.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return d(e,Error)}},e.isExistProperty=function(e,n){return e.hasOwnProperty(n)},e.isInstanceOf=d,e.logger=m,e.nativeToString=c,e.nativeTryCatch=function(e,n){try{e()}catch(e){console.log(e),n&&n(e)}},e.on=function(e,n,t,r){void 0===r&&(r=!1),e.addEventListener(n,t,r)},e.parseUrlToObj=function(e){if(!e)return{};var n=e.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!n)return{};var t=n[6]||"",r=n[8]||"";return{host:n[4],path:n[5],protocol:n[2],relative:n[5]+t+r}},e.replaceOld=function(e,n,t,r){if(void 0===r&&(r=!1),void 0!==e&&(n in e||r)){var o=t(e[n]);"function"==typeof o&&(e[n]=o)}},e.setFlag=S,e.setSilentFlag=function(e){void 0===e&&(e={}),S(o.XHR,!!e.silentXhr),S(o.FETCH,!!e.silentFetch),S(o.CONSOLE,!!e.silentConsole),S(o.DOM,!!e.silentDom),S(o.HISTORY,!!e.silentHistory),S(o.ERROR,!!e.silentError),S(o.HASHCHANGE,!!e.silentHashchange),S(o.UNHANDLEDREJECTION,!!e.silentUnhandledrejection),S(o.VUE,!!e.silentVue)},e.slientConsoleScope=function(e){e()},e.supportsHistory=function(){var e=R.chrome,n=e&&e.app&&e.app.runtime,t="history"in R&&!!R.history.pushState&&!!R.history.replaceState;return!n&&t},e.throttle=function(e,n){var t=!0;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];t&&(e.apply(this,r),t=!1,setTimeout((function(){t=!0}),n))}},e.toStringAny=x,e.toStringValidateOption=function(e,n,t){return!!x(e,t)||(void 0!==e&&m.error(n+"期望传入"+t+"类型，目前是"+c.call(e)+"类型"),!1)},e.typeofAny=y,e.unknownToString=function(e){return f.isString(e)?e:f.isUndefined(e)?"undefined":JSON.stringify(e)},e.validateOption=function(e,n,t){return!!y(e,t)||(void 0!==e&&m.error(n+"期望传入"+t+"类型，目前是"+typeof e+"类型"),!1)},e.variableTypeDetection=f,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
